!function(){const e=window.location.search.slice(1).split("&").reduce(((e,o)=>({...e,[o.split("=")[0]]:o.split("=")[1]})),{}),o=e.smsclickid,c=e.smscode,t=()=>{const e=(new Date).getTime()+2592e6,o=new Date;return o.setTime(e),o.toUTCString()};if(o&&(document.cookie=`sms_click_id=${o};expires=${t()};path=/;`,document.cookie=`sms_click_time=${(new Date).toUTCString()};expires=${t()};path=/;`,console.log(`Shop My Shelf: Registered click ${o}.`)),c)if(Array.from(document.querySelectorAll('[class*="shopify"]')).length>=2){const e=window.location.href.replace(/^(http|https):\/\//,"").split(/[/?#]/)[0];fetch(`https://${e}/discount/${c}`),console.log(`Shop My Shelf: Automatically applied discount code ${c}.`)}else document.cookie=`sms_code=${c};expires=${t()};path=/;`,console.log(`Shop My Shelf: Stored cookie for coupon ${c}.`);const s=()=>{const{sms_click_id:e,sms_code:o}=document.cookie.split(";").reduce(((e,o)=>({...e,[(o.split("=")[0]||"").trim()]:(o.split("=")[1]||"").trim()})),{});e&&Array.from(document.querySelectorAll('a[href*=".myshopify"][href*="checkout"]')).forEach((c=>{c.href.includes("smsclickid")||(console.log("Shop My Shelf: Migrating Cookie to Checkout URL"),c.href=`${c.href}${c.href.includes("?")?"&":"?"}smsclickid=${e}${o?`&smscode=${o}`:""}`)}))};setTimeout(s,250),setInterval(s,1750)}();
